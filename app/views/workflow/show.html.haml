.home
  = render 'layouts/sidenav'
.container
  .col-md-9.col-sm-9.pull-right
    .flash
      = render partial: "shared/flash_messages", flash: flash
  .col-md-9.col-sm-9.pull-right{:style => "padding: 20px; background: #fff; min-height: 470px", :class => "myvaulttable"}
    .page-header{:style => "margin-top: 0px"}
      -# %h4
      -#   Progress
      -# .progress
      -#   .progress-bar{"aria-valuemax" => "100", "aria-valuemin" => "0", "aria-valuenow" => "#{session[:progress]}%", :role => "progressbar", :style => "width: #{session[:progress]}%;"}
      -#     = "#{session[:progress]}%"
      %h1 Onboarding Tasks
      %p Please complete the onboarding process
    .col-md-12.col-sm-12
      .well.well-md
        .progress
          .progress-bar.progress-bar-info.progress-bar-striped{:role => "progressbar", :style => "width:33.3%"}
            Step 1
          .progress-bar.progress-bar-info.progress-bar-striped{:class => "#{'progress-bar-todo' if session[:progress] < 1}",
                                          :role => "progressbar", :style => "width:33.3%"}
            Step 2
          .progress-bar.progress-bar-info.progress-bar-striped{:class => "#{'progress-bar-todo' if session[:progress] < 2}",
                                          :role => "progressbar", :style => "width:33.3%"}
            Step 3
        .h4
          = @message
      -# %ul.list-group
      -#   %li.list-group-item.active
      -#     = "Current Action Needed: step #{session[:progress] + 1}"
      -#   %li.list-group-item{:style => "#{'text-decoration:line-through' if session[:progress] > 0}"}
      -#     Step 1. Fill out your personal information
      -#   %li.list-group-item{:style => "#{'text-decoration:line-through' if session[:progress] > 1}"}
      -#     Step 2. Wait for contract to be reviewed by the company
      -#   %li.list-group-item{:style => "#{'text-decoration:line-through' if session[:progress] > 2}"}
      -#     Step 3. Sign the onboarding contract
    - if (session[:progress] == 0)
      .col-md-12.col-sm-12
        %h3
          Fill out the required personal information below:
        %form.form-horizontal{:role => "form", :method => "post", :action => form_submit_path}
          .form-group
            %label.control-label.col-sm-2{:for => "tel"} Phone:
            .col-sm-6
              %input#tel.form-control{:placeholder => "555-555-5555", :type => "tel", :name => "tel"}
          .form-group
            %label.control-label.col-sm-2{:for => "address"} Address:
            .col-sm-6
              %input#address.form-control{:placeholder => "4 Privet Drive", :type => "text", :name => "address"}
          .form-group
            %label.control-label.col-sm-2{:for => "bday"} Birthday:
            .col-sm-6
              %input#bday.form-control{:type => "date", :name => "bday"}
          .form-group
            %label.control-label.col-sm-2{:for => "id"} ID #:
            .col-sm-6
              %input#id.form-control{:type => "text", :placeholder => "1234-1234132", :name => "id"}
          %input{:name => "formSubmit", :type => "hidden", :value => "true"}
          .form-group
            .col-sm-offset-2.col-sm-6
              %button.btn.btn-primary.btn-md{:type => "submit"} Submit for Approval
    - elsif (session[:progress] == 1)
      .col-md-12.col-sm-12
        %h3
          Pending employee review...
        %iframe{:height => "600", :width => "100%", :src => @previewURL, :allowfullscreen => 'allowfullscreen'}
    - elsif (session[:progress] == 2)
      .col-md-12.col-sm-12
        %iframe{:src => @url, :width => '100%', :height => '600px', :frameBorder => '0', :allowfullscreen => 'allowfullscreen'}
    - elsif (session[:progress] == 3)
      .col-md-12.col-sm-12
        %h3
          Customer onboarding process complete!
        %iframe{:height => "600", :width => "100%", :src => @previewURL, :allowfullscreen => 'allowfullscreen'}

.footer{:style=>"text-align: right; font-size: 10px;"}
  = link_to "Reset Workflow", reset_workflow_path
