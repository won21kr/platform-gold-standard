
:css

  .td {
    vertical-align: middle !important;
    font-size: 120%
  }

#loanModal.modal.fade{:role => "dialog"}
  .modal-dialog.modal-md
    .modal-content
      .modal-header-primary
        %button.close{"data-dismiss" => "modal", :type => "button"} &times;
        %h4.modal-title
          Upload Your Loan Agreement
      .modal-body
        .drop-area
          .row
            .col-md-12
              = simple_form_for(:vault, html:{class: 'dropzone', id:'my-dropzone'}, url: loan_upload_url("Loan Agreement"))  {}
      .modal-footer
        %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"} Close

#w2Modal.modal.fade{:role => "dialog"}
  .modal-dialog.modal-md
    .modal-content
      .modal-header-primary
        %button.close{"data-dismiss" => "modal", :type => "button"} &times;
        %h4.modal-title
          Upload Your W2 Form
      .modal-body
        .drop-area
          .row
            .col-md-12
              = simple_form_for(:vault, html:{class: 'dropzone', id:'my-dropzone'}, url: loan_upload_url("W2 Form"))  {}
      .modal-footer
        %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"} Close

#taxModal.modal.fade{:role => "dialog"}
  .modal-dialog.modal-md
    .modal-content
      .modal-header-primary
        %button.close{"data-dismiss" => "modal", :type => "button"} &times;
        %h4.modal-title
          Upload Your Tax Return
      .modal-body
        .drop-area
          .row
            .col-md-12
              = simple_form_for(:vault, html:{class: 'dropzone', id:'my-dropzone'}, url: loan_upload_url("Tax Return"))  {}
      .modal-footer
        %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"} Close

.home
.container
  = render 'layouts/sidenav'
  .col-md-9.col-sm-8.col-xs-9.pull-right
    .flash
      = render partial: "shared/flash_messages", flash: flash
  .col-md-9.col-sm-8.col-xs-9.pull-right{:style => "padding: 20px; background: #fff;", :class => "myvaulttable"}
    .panel.panel-default{:style => "margin-bottom: 0px"}
      .panel-heading
        -# .pull-right.h4
        -#   %button.btn.btn-primary.btn-lg{"data-target" => "#myModal", "data-toggle" => "modal", :type => "button"} Upload
        %h2 My Loan Documents
        -# .sub-title
        -#   = ""
      %table.table
        %thead
          %tr
            -# Either file thumbnail or some missing glyph
            %th File
            -# Either Loan Agreement, W2 Form, or Tax Return
            %th Name
            -# Either Missing, Received 'time stamp', pending review
            %th.hidden-xs.hidden-sm Status
            -# Either upload or view/download, maybe comments, change file
            %th Actions
          %tbody
            -# Loan Agreement
            %tr
              %td.td
                = image_tag @docStatus["Loan Image"], width: '50px'
              %td.td
                Loan Agreement
              %td.td
                = @docStatus["Loan Agreement"]
              %td.td
                %button.btn.btn-primary.btn-lg{"data-target" => "#loanModal", "data-toggle" => "modal", :type => "button"} Upload
            -# W2 Form
            %tr
              %td.td
                = image_tag'file_toupload.png', width: '50px'
              %td.td
                W2 Form
              %td.td
                = @docStatus["W2 Form"]
              %td.td
                %button.btn.btn-primary.btn-lg{"data-target" => "#w2Modal", "data-toggle" => "modal", :type => "button"} Upload
            -# Tax Return
            %tr
              %td.td
                = image_tag'file_toupload.png', width: '50px'
              %td.td
                Tax Return
              %td.td
                = @docStatus["Tax Return"]
              %td.td
                %button.btn.btn-primary.btn-lg{"data-target" => "#taxModal", "data-toggle" => "modal", :type => "button"} Upload

:javascript

  Dropzone.options.myDropzone = {
    init: function() {
      this.on("queuecomplete", function(file) {
        setTimeout(function() {location.reload();}, 2000);
      });
    }
  };
