/ back to previous page
%h5(style="margin-top: -5px; font-size: 120%;")
  - if (session[:current_page] == "search")
    = link_to '<< Back to Resources', '/resources/' + session[:rfolder]
  - else
    = link_to '<< Back to Product Catalog', dashboard_id_path(session[:current_folder])



%body.transition
  .viewer{:style=>"margin: 0px; height: 800px; overflow: hidden; background: #F1F3FA;"}
  .controls{:style => "position: fixed; bottom: 70px; left: 50%; margin-left: -150px; width: 300px; text-align: center;"}
    %button.pop{:style=>"background: #fafafa; border: 10", :onclick => "setMode('pop')"} Pop
    %button.carousel{:style=>"background: #fafafa; border: 10;", :onclick => "setMode('carousel')"} Carousel
    %button.book{:style=>"background: #fafafa; border: 10;", :onclick => "setMode('book')"} Book
    %button.book{:style=>"background: #fafafa; border: 10;", :onclick => "setMode('slide')"} Slide
    %button.book{:style=>"background: #fafafa; border: 10;", :onclick => "setMode('spin')"} Spin
:javascript
   var viewer,
   url = 'https://view-api.box.com/1/sessions/5605a3280df141ea890811545a0fe084/assets';


           function setMode(mode) {
               console.log(mode);
               $('.controls button').removeClass('selected');

               $('.controls button.' + mode).addClass('selected');
               console.log('JS');

               switch (mode) {
                   case 'pop':
                       $('body').removeClass().addClass('crocodoc-presentation-pop');
                       viewer.setLayout(Crocodoc.LAYOUT_PRESENTATION);
                       console.log(Crocodoc.LAYOUT_PRESENTATION);
                       viewer.zoom(Crocodoc.ZOOM_AUTO);
                       break;

                       case 'carousel':
                       viewer.setLayout(Crocodoc.LAYOUT_PRESENTATION);
                       viewer.zoom(Crocodoc.ZOOM_AUTO);
                       viewer.zoom(Crocodoc.ZOOM_OUT);
                       $('body').removeClass().addClass('crocodoc-presentation-carousel');
                       console.log('crocodoc-carousel');
                       break;

                   case 'book':
                       viewer.setLayout(Crocodoc.LAYOUT_PRESENTATION_TWO_PAGE);
                       viewer.zoom(Crocodoc.ZOOM_AUTO);
                       $('body').removeClass().addClass('crocodoc-pageflip');
                       break;

                   case 'slide':
                       viewer.setLayout(Crocodoc.LAYOUT_PRESENTATION_TWO_PAGE);
                       viewer.zoom(Crocodoc.ZOOM_AUTO);
                       $('body').removeClass().addClass('crocodoc-presentation-slide');
                       break;

                   case 'spin':
                      viewer.setLayout(Crocodoc.LAYOUT_PRESENTATION_TWO_PAGE);
                      viewer.zoom(Crocodoc.ZOOM_AUTO);
                      $('body').removeClass().addClass('crocodoc-presentation-spin');
                      break;
               }
           }

           viewer = Crocodoc.createViewer('.viewer', {
               url: url,
               layout: Crocodoc.LAYOUT_PRESENTATION
           });
           viewer.load();

           viewer.on('ready', function () {
               $(window).on('keydown', function (ev) {
                   if (ev.keyCode === 37) {
                       viewer.scrollTo(Crocodoc.SCROLL_PREVIOUS);
                   } else if (ev.keyCode === 39) {
                       viewer.scrollTo(Crocodoc.SCROLL_NEXT);
                   } else {
                       return;
                   }
                   ev.preventDefault();
               });

               setMode('carousel');
           });
